GAMS 32.2.0  rc62c018 Released Aug 26, 2020 WEX-WEI x86 64bit/MS Windows - 10/05/20 18:50:19 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


      Andrew Walker
      HW5 Integer programing problem
      10/5/2020
   6   
   7  *define sets
   8  SETS
   9  Loc location of flow /res "reseviour", pump,farm,river/
  10  t time in season /t1,t2/
  11  size size of built resivour /non,low,high/;
  12  PARAMETERS
  13  Cost(size) Cost to build resivour ($) /non 0, low 6000, High 10000/
  14  Demand(t) water demand per acre(acft per ac) /t1 1, t2 3/
  15  Inflow(t) flow into system per season /t1 600, t2 200/
  16  Storage(size) storage of resivour if built (acft) /non 0,low 300, high 700/;
  17  *things staying constant
  18  Scalar
  19  PumpCap cpacity of the pump (acft per day) /2.2/
  20  Opcost operating cost of the pump ($ per acft) /20/
  21  GW_add additonal water from ground water (acft per day) /2/
  22  Profit profit per ac irrigated /300/
  23  PCost operating cost of the pump /8000/;
  24  *things that change
  25  VARIABLES
  26  I(size) size of buit resivour binary
  27  P wether or not to build pump
  28  A area of irrigated land
  29  X(loc,t) ammount of water provided by each water source
  30  Nbenifit net benifit to farmer;
  31  BINARY VARIABLES I,P;
  32  * Non-negativity constraints
  33  POSITIVE VARIABLES X,A;
  34   
  35  EQUATIONS
  36      BENIFIT total benift generated by irrigatiion less the costs
  37      ResStor(t) storage in resivour not overcoming built capacity
  38      Massbalance1 flow in equals flow out season 1
  39      Massbalance2 flow in equals flow out season 1
  40      AreaIrr(t) area irrigaated y water supply
  41      BuildRes only build one res
  42      PCap(t) pump capacity not to exeed restrictions
  43      RiverMass(t) mass ballance river  plus reach infil;
  44  BENIFIT.. Nbenifit =E= A*Profit -PCost*P-(SUM(t,X('pump',t)*Opcost)+SUM(size,I(size)*Cost(size)))-8000;
  45  ResStor(t).. X('res',t) =L= SUM(size,Storage(size)*I(size));
  46  AreaIrr(t).. A =L= (X('farm',t)+X('pump',t))/(Demand(t));
  47  BuildRes.. 1 =E= Sum(size,I(size));
  48  PCap(t).. X('pump',t) =L= PumpCap*365/2;
  49  RiverMass(t).. X('river',t)+GW_add*365/2- X('pump',t) =G= 0;
  50  MassBalance1.. X('res','t1') =E= Inflow('t1')-X('farm','t1')-X('river','t1');
  51  Massbalance2.. X('res','t2') =E= Inflow('t2')+X('res','t1')-X('farm','t2')-X('river','t2')
  52  MODEL Farmer/ALL/;
  53   
  54  SOLVE Farmer USING MIP MAXIMIZING Nbenifit;


COMPILATION TIME     =        0.000 SECONDS      3 MB  32.2.0 rc62c018 WEX-WEI
GAMS 32.2.0  rc62c018 Released Aug 26, 2020 WEX-WEI x86 64bit/MS Windows - 10/05/20 18:50:19 Page 2
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Equation Listing    SOLVE Farmer Using MIP From line 54


---- BENIFIT  =E=  total benift generated by irrigatiion less the costs

BENIFIT..  6000*I(low) + 10000*I(high) + 8000*P - 300*A + 20*X(pump,t1) + 20*X(pump,t2) + Nbenifit =E= -8000 ; (LHS = 0, INFES = 8000 ****)
     

---- ResStor  =L=  storage in resivour not overcoming built capacity

ResStor(t1)..  - 300*I(low) - 700*I(high) + X(res,t1) =L= 0 ; (LHS = 0)
     
ResStor(t2)..  - 300*I(low) - 700*I(high) + X(res,t2) =L= 0 ; (LHS = 0)
     

---- Massbalance1  =E=  flow in equals flow out season 1

Massbalance1..  X(res,t1) + X(farm,t1) + X(river,t1) =E= 600 ; (LHS = 0, INFES = 600 ****)
     

---- Massbalance2  =E=  flow in equals flow out season 1

Massbalance2..  - X(res,t1) + X(res,t2) + X(farm,t2) + X(river,t2) =E= 200 ; (LHS = 0, INFES = 200 ****)
     

---- AreaIrr  =L=  area irrigaated y water supply

AreaIrr(t1)..  A - X(pump,t1) - X(farm,t1) =L= 0 ; (LHS = 0)
     
AreaIrr(t2)..  A - 0.333333333333333*X(pump,t2) - 0.333333333333333*X(farm,t2) =L= 0 ; (LHS = 0)
     

---- BuildRes  =E=  only build one res

BuildRes..  - I(non) - I(low) - I(high) =E= -1 ; (LHS = 0, INFES = 1 ****)
     

---- PCap  =L=  pump capacity not to exeed restrictions

PCap(t1)..  X(pump,t1) =L= 401.5 ; (LHS = 0)
     
PCap(t2)..  X(pump,t2) =L= 401.5 ; (LHS = 0)
     

---- RiverMass  =G=  mass ballance river  plus reach infil

RiverMass(t1)..  - X(pump,t1) + X(river,t1) =G= -365 ; (LHS = 0)
     
RiverMass(t2)..  - X(pump,t2) + X(river,t2) =G= -365 ; (LHS = 0)
     
GAMS 32.2.0  rc62c018 Released Aug 26, 2020 WEX-WEI x86 64bit/MS Windows - 10/05/20 18:50:19 Page 3
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Column Listing      SOLVE Farmer Using MIP From line 54


---- I  size of buit resivour binary

I(non)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       -1       BuildRes

I(low)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
     6000       BENIFIT
     -300       ResStor(t1)
     -300       ResStor(t2)
       -1       BuildRes

I(high)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
    10000       BENIFIT
     -700       ResStor(t1)
     -700       ResStor(t2)
       -1       BuildRes


---- P  wether or not to build pump

P
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
     8000       BENIFIT


---- A  area of irrigated land

A
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
     -300       BENIFIT
        1       AreaIrr(t1)
        1       AreaIrr(t2)


---- X  ammount of water provided by each water source

X(res,t1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       ResStor(t1)
        1       Massbalance1
       -1       Massbalance2

X(res,t2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       ResStor(t2)
        1       Massbalance2

X(pump,t1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       20       BENIFIT
       -1       AreaIrr(t1)
        1       PCap(t1)
       -1       RiverMass(t1)

REMAINING 5 ENTRIES SKIPPED

---- Nbenifit  net benifit to farmer

Nbenifit
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       BENIFIT

GAMS 32.2.0  rc62c018 Released Aug 26, 2020 WEX-WEI x86 64bit/MS Windows - 10/05/20 18:50:19 Page 4
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Model Statistics    SOLVE Farmer Using MIP From line 54


MODEL STATISTICS

BLOCKS OF EQUATIONS           8     SINGLE EQUATIONS           12
BLOCKS OF VARIABLES           5     SINGLE VARIABLES           14
NON ZERO ELEMENTS            35     DISCRETE VARIABLES          4


GENERATION TIME      =        0.031 SECONDS      4 MB  32.2.0 rc62c018 WEX-WEI
GAMS 32.2.0  rc62c018 Released Aug 26, 2020 WEX-WEI x86 64bit/MS Windows - 10/05/20 18:50:19 Page 5
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Solution Report     SOLVE Farmer Using MIP From line 54


               S O L V E      S U M M A R Y

     MODEL   Farmer              OBJECTIVE  Nbenifit
     TYPE    MIP                 DIRECTION  MAXIMIZE
     SOLVER  CPLEX               FROM LINE  54

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      1 Optimal                   
**** OBJECTIVE VALUE            82150.0000

 RESOURCE USAGE, LIMIT          0.031 10000000000.000
 ITERATION COUNT, LIMIT        11    2147483647

IBM ILOG CPLEX   32.2.0 rc62c018 Released Aug 26, 2020 WEI x86 64bit/MS Window
--- GAMS/Cplex Link licensed for continuous and discrete problems.
Cplex 12.10.0.0

Space for names approximately 0.00 Mb
Use option 'names no' to turn use of names off
MIP status(101): integer optimal solution
Cplex Time: 0.02sec (det. 0.11 ticks)
Fixing integer variables, and solving final LP...
Fixed MIP status(1): optimal
Cplex Time: 0.00sec (det. 0.02 ticks)
Proven optimal solution.

MIP Solution:        82150.000000    (7 iterations, 0 nodes)
Final Solve:         82150.000000    (4 iterations)

Best possible:       82150.000000
Absolute gap:            0.000000
Relative gap:            0.000000


                           LOWER          LEVEL          UPPER         MARGINAL

---- EQU BENIFIT        -8000.0000     -8000.0000     -8000.0000         1.0000      

  BENIFIT  total benift generated by irrigatiion less the costs

---- EQU ResStor  storage in resivour not overcoming built capacity

          LOWER          LEVEL          UPPER         MARGINAL

t1        -INF         -117.5000          .              .          
t2        -INF         -700.0000          .              .          

                           LOWER          LEVEL          UPPER         MARGINAL

---- EQU Massbalan~       600.0000       600.0000       600.0000        75.0000      
---- EQU Massbalan~       200.0000       200.0000       200.0000        75.0000      

  Massbalance1  flow in equals flow out season 1
  Massbalance2  flow in equals flow out season 1

---- EQU AreaIrr  area irrigaated y water supply

          LOWER          LEVEL          UPPER         MARGINAL

t1        -INF             .              .            75.0000      
t2        -INF             .              .           225.0000      

                           LOWER          LEVEL          UPPER         MARGINAL

---- EQU BuildRes          -1.0000        -1.0000        -1.0000          .          

  BuildRes  only build one res

---- EQU PCap  pump capacity not to exeed restrictions

          LOWER          LEVEL          UPPER         MARGINAL

t1        -INF          365.0000       401.5000          .          
t2        -INF          365.0000       401.5000          .          

---- EQU RiverMass  mass ballance river  plus reach infil

          LOWER          LEVEL          UPPER         MARGINAL

t1      -365.0000      -365.0000        +INF          -55.0000      
t2      -365.0000      -365.0000        +INF          -55.0000      

---- VAR I  size of buit resivour binary

            LOWER          LEVEL          UPPER         MARGINAL

non           .              .             1.0000         EPS         
low           .              .             1.0000     -6000.0000      
high          .             1.0000         1.0000    -10000.0000      

                           LOWER          LEVEL          UPPER         MARGINAL

---- VAR P                   .              .             1.0000     -8000.0000      
---- VAR A                   .           382.5000        +INF             .          

  P  wether or not to build pump
  A  area of irrigated land

---- VAR X  ammount of water provided by each water source

                LOWER          LEVEL          UPPER         MARGINAL

res  .t1          .           582.5000        +INF             .          
res  .t2          .              .            +INF          -75.0000      
pump .t1          .           365.0000        +INF             .          
pump .t2          .           365.0000        +INF             .          
farm .t1          .            17.5000        +INF             .          
farm .t2          .           782.5000        +INF             .          
river.t1          .              .            +INF          -20.0000      
river.t2          .              .            +INF          -20.0000      

                           LOWER          LEVEL          UPPER         MARGINAL

---- VAR Nbenifit          -INF        82150.0000        +INF             .          

  Nbenifit  net benifit to farmer


**** REPORT SUMMARY :        0     NONOPT
                             0 INFEASIBLE
                             0  UNBOUNDED


EXECUTION TIME       =        0.141 SECONDS      4 MB  32.2.0 rc62c018 WEX-WEI


USER: Small MUD - 5 User License                     G200622/0001AP-GEN
      Utah State University, Utah Water Research Laboratory      DC7087
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      C:\Users\oboem\Documents\GitHub\CEE-5410-Walker\HW5 MIP.gms
Output     C:\Users\oboem\Documents\GitHub\CEE-5410-Walker\HW5 MIP.lst
